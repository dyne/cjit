#!/bin/bash

head=src/embedded.h
code=src/embedded.c
rm -f ${head} ${code}
cat <<EOF > ${head}
// Generated by cjit/build/init-embeddings.sh
// `date`

#ifndef __EMBEDDED_H__
#define __EMBEDDED_H__

EOF

cat <<EOF > ${code}
// Generated by cjit/build/init-embeddings.sh
// `date`

#include <stdio.h>
#include <stdbool.h>
#include <inttypes.h>
#include <embedded.h>
#include <cjit.h>

// from file.c
extern bool cjit_mkdtemp(CJITState *CJIT);
extern int muntargz_to_path(const char *path, const uint8_t *buf, const unsigned int len);

// main function
bool extract_embeddings(CJITState *CJIT) {
  if(!CJIT->tmpdir) return(false);
  bool res = 0;
  char incpath[512];
EOF

exit 0
