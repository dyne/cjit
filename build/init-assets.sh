#!/bin/bash

head=src/assets.h
code=src/assets.c
rm -f ${head} ${code}
cat <<EOF > ${head}
// Generated by cjit/build/init-assets.sh
// `date`

#ifndef __ASSETS_H__
#define __ASSETS_H__

EOF

cat <<EOF > ${code}
// Generated by cjit/build/init-assets.sh
// `date`

#include <stdio.h>
#include <stdbool.h>
#include <inttypes.h>
#include <assets.h>
#include <cjit.h>

// from muntar.c
extern int muntargz_to_path(const char *path, const uint8_t *buf, const unsigned int len);

// main function
bool extract_assets(CJITState *CJIT,const char *optional_path) {
  if( !cjit_mkdtemp(CJIT, optional_path) ) return false;
  // if( !CJIT->tmpdir ) return(false);
  bool res = 0;
  char incpath[512];
EOF

exit 0
